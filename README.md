# MULTI_PROMPT_TEXT2KG

This repository contains the official implementation of our research framework for **Ontology-Aware Knowledge Graph Construction from Unstructured Text using Large Language Models (LLMs)**.

The system combines multiple prompting strategies with a hierarchical evaluator to improve extraction accuracy while mitigating hallucinations. It is designed and evaluated on the **Text2KGBench** benchmark (DBpediaâ€“WebNLG and Wikidataâ€“TekGen).

---

# ğŸš€ Overview

Knowledge Graph (KG) construction from natural language is challenging due to:

- Incomplete supervision  
- Ontology constraints  
- Hallucinated entities and relations  
- Inconsistent triple formatting  

To address these issues, we propose a **multi-prompt ensemble framework** consisting of:

- ğŸ” **Structured Multi-Step Reasoning (ToT-based)**
- ğŸ“š **Ontology-Constrained OpenIE Prompt**
- âš¡ **General Ontology-Aware Extraction Prompt**
- ğŸ§  **Hierarchical Evaluator (Rules Aâ€“C)**

The evaluator filters candidate triples using cross-prompt agreement, explicit evidence scoring, and textual similarity measures to reduce hallucinations and enforce schema compliance.

---

# ğŸ§  System Architecture

The pipeline follows three main stages:

## 1ï¸âƒ£ Multi-Prompt Candidate Generation

For each input sentence and ontology:

### ğŸ” ToT-Based Structured Extraction
- Depth-first search over candidate triples  
- State scoring and pruning  
- Structured reasoning under ontology constraints  

### ğŸ“š Ontology-Constrained OpenIE
- Single-pass extraction  
- Domainâ€“range enforcement  
- Type assignments and evidence spans  

### âš¡ General Ontology-Aware Extraction
- Lightweight SPO extraction  
- High recall  
- Minimal structural constraints  

Each prompt produces an independent candidate triple set.

---

## 2ï¸âƒ£ Evaluator (Hierarchical Verification)

All triples are merged and filtered using three rules:

### Rule A â€“ Cross-Prompt Consensus
- Accept if generated by at least two prompts  
- Must match text grounding  

### Rule B â€“ Evidence-Based Validation
- Accept single-prompt triples only if supported by explicit evidence spans  

### Rule C â€“ Similarity-Based Fallback
- Low-trust filtering using surface-level textual alignment  

Priority order:

